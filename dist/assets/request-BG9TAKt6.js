import{a}from"./index-DW_MHI2K.js";const s={VITE_BASE_URL:"http://localhost:3001/api"};let{VITE_BASE_URL:o}=s;const r=a.create({baseURL:o,timeout:1e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));r.interceptors.response.use(e=>e.data,e=>{const{response:t}=e;if(t)switch(t.status){case 401:localStorage.removeItem("token"),window.location.href="/login";break;case 403:alert("没有权限访问");break;case 404:alert("请求的资源不存在");break;case 500:alert("服务器错误");break;default:alert(t.data.message||"请求失败")}else alert("网络错误，请检查网络连接");return Promise.reject(e)});export{r};
