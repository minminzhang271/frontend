import{j as s,u as p,r as l,a as j}from"./index-nEBRHmkM.js";import{H as v,F as f}from"./index-B12LLSzU.js";import"./request-BG9TAKt6.js";import{f as b,p as g}from"./parseISO-C7yGKLZ3.js";import"./index-DW_MHI2K.js";const N="_banner_6hqad_1",y="_title_6hqad_9",C="_desc_6hqad_15",I="_breadcrumbs_6hqad_21",d={banner:N,title:y,desc:C,breadcrumbs:I};function q(){return s.jsxs("div",{className:d.banner,children:[s.jsx("div",{className:d.title,children:"AIGC"}),s.jsx("div",{className:d.desc,children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore."}),s.jsx("div",{className:d.breadcrumbs,children:"Blog > AIGC"})]})}const E="_list_1x07q_2",w="_item_1x07q_5",L="_itemCover_1x07q_15",P="_itemContent_1x07q_24",S="_itemInfo_1x07q_56",r={list:E,item:w,itemCover:L,itemContent:P,itemInfo:S};function B(n){const a=p();console.log("props",n);const m="http://localhost:3001/api",{data:o}=n,i=t=>{var e,x;try{const u=m+"/"+((x=(e=t.cover)==null?void 0:e.thumbnail)==null?void 0:x.path)||"default-thumbnail.jpg";return s.jsx("img",{src:u,alt:""})}catch(u){console.error("获取缩略图失败:",u)}},h=t=>b(g(t),"yyyy-MM-dd");function c(t){console.log("id",t),a("/post/"+t)}return s.jsx("div",{className:r.list,children:s.jsx("ul",{children:o.map((t,e)=>s.jsxs("li",{className:r.item,children:[s.jsx("div",{className:r.itemCover,onClick:()=>c(t.id),children:i(t)}),s.jsxs("div",{className:r.itemContent,children:[s.jsx("h3",{className:r.itemTitle,children:t.title}),s.jsx("p",{className:r.itemDesc,children:t.description}),s.jsxs("div",{className:r.itemInfo,children:[s.jsx("span",{children:t.author})," | ",s.jsx("span",{children:h(t.created_at)})]})]})]},e))})})}const k="_container_15r34_1",A="_listWrap_15r34_6",_={container:k,listWrap:A},T={VITE_BASE_URL:"http://localhost:3001/api"};let{VITE_BASE_URL:W}=T;const $=async n=>{const a=await fetch(`${W}/api/category/${n}/posts`);if(!a.ok)throw new Error("网络错误或服务器错误");return a.json()};function R(){const[n,a]=l.useState([]),[m,o]=l.useState(!1),[i,h]=l.useState(null),{id:c}=j();return l.useEffect(()=>{(async()=>{o(!0);try{const{data:e}=await $(c);e.posts.length?a(e.posts):a([])}catch(e){h(e.message),console.error("获取博客列表失败:",e)}finally{o(!1)}})()},[c]),m?s.jsx("div",{className:"container mx-auto px-4",children:s.jsx("div",{children:"loading"})}):i?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs("div",{className:"text-red-500 text-lg",children:["错误: ",i]}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"重试"})]}):s.jsx("div",{className:"container  ",children:s.jsx("div",{className:_.listWrap,children:n.length>0?s.jsx(B,{data:n}):s.jsx("div",{className:"data-empty",children:"没有数据"})})})}function M(){return s.jsxs("div",{children:[s.jsx(v,{}),s.jsx(q,{}),s.jsx("div",{className:_.container,children:s.jsx(R,{})}),s.jsx(f,{})]})}export{M as default};
